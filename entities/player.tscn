[gd_scene load_steps=16 format=3 uid="uid://cu8j7xbaxo1f6"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_wvd2u"]
[ext_resource type="Texture2D" uid="uid://l4gauitsc1us" path="res://assets/player_sprites/player.png" id="2_8fetl"]
[ext_resource type="PackedScene" uid="uid://dc8rimqyknipt" path="res://entities/antenna.tscn" id="3_xmfgn"]
[ext_resource type="PackedScene" uid="uid://r1j77re315r0" path="res://entities/antenna_segment.tscn" id="4_ijx4n"]
[ext_resource type="PackedScene" uid="uid://b0jxd6wu7epxi" path="res://entities/antenna_joint.tscn" id="5_ge647"]
[ext_resource type="PackedScene" uid="uid://ce6om8onyfgv1" path="res://entities/tire_smoke.tscn" id="6_l3pon"]

[sub_resource type="SkeletonModification2DJiggle" id="SkeletonModification2DJiggle_jgk1w"]
target_nodepath = NodePath("../AntennaTarget1")
jiggle_data_chain_length = 4
stiffness = 6.0
joint_data/0/bone_index = 0
joint_data/0/bone2d_node = NodePath("0")
joint_data/0/override_defaults = false
joint_data/1/bone_index = 1
joint_data/1/bone2d_node = NodePath("0/1")
joint_data/1/override_defaults = false
joint_data/2/bone_index = 2
joint_data/2/bone2d_node = NodePath("0/1/2")
joint_data/2/override_defaults = false
joint_data/3/bone_index = 3
joint_data/3/bone2d_node = NodePath("0/1/2/3")
joint_data/3/override_defaults = false

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_2pr5p"]
enabled = true
modification_count = 1
modifications/0 = SubResource("SkeletonModification2DJiggle_jgk1w")

[sub_resource type="SkeletonModification2DJiggle" id="SkeletonModification2DJiggle_3ygej"]
target_nodepath = NodePath("../AntennaTarget2")
jiggle_data_chain_length = 5
stiffness = 6.0
joint_data/0/bone_index = 0
joint_data/0/bone2d_node = NodePath("0")
joint_data/0/override_defaults = false
joint_data/1/bone_index = 1
joint_data/1/bone2d_node = NodePath("0/1")
joint_data/1/override_defaults = false
joint_data/2/bone_index = 2
joint_data/2/bone2d_node = NodePath("0/1/2")
joint_data/2/override_defaults = false
joint_data/3/bone_index = 3
joint_data/3/bone2d_node = NodePath("0/1/2/3")
joint_data/3/override_defaults = false
joint_data/4/bone_index = 4
joint_data/4/bone2d_node = NodePath("0/1/2/3/4")
joint_data/4/override_defaults = false

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_18qs8"]
enabled = true
modification_count = 1
modifications/0 = SubResource("SkeletonModification2DJiggle_3ygej")

[sub_resource type="Animation" id="Animation_tmp8v"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -15)]
}

[sub_resource type="Animation" id="Animation_7sani"]
resource_name = "engine"
length = 0.3
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.166667, 0.3),
"transitions": PackedFloat32Array(1, 0.241484, 1, 1),
"update": 0,
"values": [Vector2(0, -15), Vector2(0, -14), Vector2(0, -15), Vector2(0, -14)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_hebc6"]
_data = {
"RESET": SubResource("Animation_tmp8v"),
"engine": SubResource("Animation_7sani")
}

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_vc2im"]
radius = 5.0

[sub_resource type="CircleShape2D" id="CircleShape2D_1pxna"]
radius = 7.0

[node name="Player" type="CharacterBody2D" groups=["player"]]
collision_mask = 2
script = ExtResource("1_wvd2u")
gravity = 20
jump_force = 400

[node name="Antenna" parent="." instance=ExtResource("3_xmfgn")]
position = Vector2(-13, -10)
node_a = NodePath("..")
node_b = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment0")
segments = 5

[node name="AntennaSegment0" type="RigidBody2D" parent="Antenna" instance=ExtResource("4_ijx4n")]
collision_layer = 0
collision_mask = 0
mass = 2.0
gravity_scale = -2.0
linear_damp = 3.0
angular_damp = 2.0

[node name="AntennaSegment1" type="RigidBody2D" parent="Antenna" instance=ExtResource("4_ijx4n")]
position = Vector2(0, -4)
collision_layer = 0
collision_mask = 0
mass = 2.0
gravity_scale = -2.0
linear_damp = 3.0
angular_damp = 2.0

[node name="AntennaJoint1" type="PinJoint2D" parent="Antenna" instance=ExtResource("5_ge647")]
modulate = Color(0, 0.566825, 0.333748, 0.32549)
position = Vector2(0, -4)
scale = Vector2(0.163377, 0.163377)
node_a = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment0")
node_b = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment1")
bias = 0.155
angular_limit_lower = -0.785398
angular_limit_upper = 0.785398
motor_enabled = true

[node name="AntennaSegment2" type="RigidBody2D" parent="Antenna" instance=ExtResource("4_ijx4n")]
position = Vector2(0, -8)
collision_layer = 0
collision_mask = 0
mass = 2.0
gravity_scale = -2.0
linear_damp = 3.0
angular_damp = 2.0

[node name="AntennaJoint2" type="PinJoint2D" parent="Antenna" instance=ExtResource("5_ge647")]
modulate = Color(0, 0.566825, 0.333748, 0.32549)
position = Vector2(0, -8)
scale = Vector2(0.163377, 0.163377)
node_a = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment1")
node_b = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment2")
bias = 0.155
angular_limit_lower = -0.785398
angular_limit_upper = 0.785398
motor_enabled = true

[node name="AntennaSegment3" type="RigidBody2D" parent="Antenna" instance=ExtResource("4_ijx4n")]
position = Vector2(0, -12)
collision_layer = 0
collision_mask = 0
mass = 2.0
gravity_scale = -2.0
linear_damp = 3.0
angular_damp = 2.0

[node name="AntennaJoint3" type="PinJoint2D" parent="Antenna" instance=ExtResource("5_ge647")]
modulate = Color(0, 0.566825, 0.333748, 0.32549)
position = Vector2(0, -12)
scale = Vector2(0.163377, 0.163377)
node_a = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment2")
node_b = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment3")
bias = 0.155
angular_limit_lower = -0.785398
angular_limit_upper = 0.785398
motor_enabled = true

[node name="AntennaSegment4" type="RigidBody2D" parent="Antenna" instance=ExtResource("4_ijx4n")]
position = Vector2(0, -16)
collision_layer = 0
collision_mask = 0
mass = 2.0
gravity_scale = -2.0
linear_damp = 3.0
angular_damp = 2.0

[node name="AntennaJoint4" type="PinJoint2D" parent="Antenna" instance=ExtResource("5_ge647")]
modulate = Color(0, 0.566825, 0.333748, 0.32549)
position = Vector2(0, -16)
scale = Vector2(0.163377, 0.163377)
node_a = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment3")
node_b = NodePath("/root/@EditorNode@16886/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@PanelContainer@98/MainScreen/@CanvasItemEditor@9272/@VSplitContainer@9094/@HSplitContainer@9096/@HSplitContainer@9098/@Control@9099/@SubViewportContainer@9100/@SubViewport@9101/Player/Antenna/AntennaSegment4")
bias = 0.155
angular_limit_lower = -0.785398
angular_limit_upper = 0.785398
motor_enabled = true

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(0, -15)
texture = ExtResource("2_8fetl")

[node name="Antennae" type="Node2D" parent="Sprite2D"]
process_mode = 4
visible = false
position = Vector2(-13, 3.11653)

[node name="AntennaTarget1" type="Marker2D" parent="Sprite2D/Antennae"]
position = Vector2(0, -21)
gizmo_extents = 5.0

[node name="AntennaTarget2" type="Marker2D" parent="Sprite2D/Antennae"]
position = Vector2(2, -24)
gizmo_extents = 5.0

[node name="Antenna1" type="Skeleton2D" parent="Sprite2D/Antennae"]
modification_stack = SubResource("SkeletonModificationStack2D_2pr5p")

[node name="0" type="Bone2D" parent="Sprite2D/Antennae/Antenna1"]
rotation = -1.5708
scale = Vector2(0.999976, 0.999976)
rest = Transform2D(-4.37114e-08, -1, 1, -4.37114e-08, -14, -10)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line0" type="Line2D" parent="Sprite2D/Antennae/Antenna1/0"]
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="1" type="Bone2D" parent="Sprite2D/Antennae/Antenna1/0"]
position = Vector2(4, 9.53674e-07)
scale = Vector2(1, 1)
rest = Transform2D(1, 0, 0, 1, 4, 9.53674e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line1" type="Line2D" parent="Sprite2D/Antennae/Antenna1/0/1"]
position = Vector2(0, -7.78829e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="2" type="Bone2D" parent="Sprite2D/Antennae/Antenna1/0/1"]
position = Vector2(4, -3.8147e-06)
scale = Vector2(1, 1)
rest = Transform2D(1, 0, 0, 1, 4, -7.78829e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line2" type="Line2D" parent="Sprite2D/Antennae/Antenna1/0/1/2"]
position = Vector2(0, 1.74845e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="3" type="Bone2D" parent="Sprite2D/Antennae/Antenna1/0/1/2"]
position = Vector2(4, 9.53674e-07)
rotation = -2.44379e-05
scale = Vector2(1, 1)
rest = Transform2D(1, 0, 0, 1, 4, 1.74846e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line3" type="Line2D" parent="Sprite2D/Antennae/Antenna1/0/1/2/3"]
position = Vector2(0, 1.74846e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Antenna2" type="Skeleton2D" parent="Sprite2D/Antennae"]
position = Vector2(2, 0)
modification_stack = SubResource("SkeletonModificationStack2D_18qs8")

[node name="0" type="Bone2D" parent="Sprite2D/Antennae/Antenna2"]
rotation = -1.5708
scale = Vector2(0.999971, 0.999971)
rest = Transform2D(-4.37114e-08, -1, 1, -4.37114e-08, -14, -10)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line0" type="Line2D" parent="Sprite2D/Antennae/Antenna2/0"]
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="1" type="Bone2D" parent="Sprite2D/Antennae/Antenna2/0"]
position = Vector2(4.00004, -8.39233e-05)
scale = Vector2(0.999995, 0.999995)
rest = Transform2D(1, 0, 0, 1, 4, 9.53674e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line1" type="Line2D" parent="Sprite2D/Antennae/Antenna2/0/1"]
position = Vector2(0, -7.78829e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="2" type="Bone2D" parent="Sprite2D/Antennae/Antenna2/0/1"]
position = Vector2(3.99974, -0.000130653)
scale = Vector2(0.999994, 0.999994)
rest = Transform2D(1, 0, 0, 1, 4, -7.78829e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line2" type="Line2D" parent="Sprite2D/Antennae/Antenna2/0/1/2"]
position = Vector2(0, 1.74845e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="3" type="Bone2D" parent="Sprite2D/Antennae/Antenna2/0/1/2"]
position = Vector2(3.99997, -4.3869e-05)
rotation = 1.22786e-05
scale = Vector2(0.999548, 0.999548)
rest = Transform2D(1, 0, 0, 1, 4, 1.74846e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line3" type="Line2D" parent="Sprite2D/Antennae/Antenna2/0/1/2/3"]
position = Vector2(0, 1.74846e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="4" type="Bone2D" parent="Sprite2D/Antennae/Antenna2/0/1/2/3"]
position = Vector2(4.00231, 5.53131e-05)
rotation = 0.000218868
scale = Vector2(1, 1)
rest = Transform2D(1, 0, 0, 1, 4, 1.74846e-07)
auto_calculate_length_and_angle = false
length = 4.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Line3" type="Line2D" parent="Sprite2D/Antennae/Antenna2/0/1/2/3/4"]
position = Vector2(0, 1.74846e-07)
points = PackedVector2Array(0, 0, 4, 9.53674e-07)
width = 1.0
default_color = Color(0.129412, 0.129412, 0.137255, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, -28)
position_smoothing_enabled = true

[node name="CoyoteTimer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[node name="JumpBufferTimer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[node name="JumpHeightTimer" type="Timer" parent="."]
wait_time = 0.15
one_shot = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_hebc6")
}
autoplay = "engine"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -5)
rotation = -1.57079
shape = SubResource("CapsuleShape2D_vc2im")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="."]
position = Vector2(0, -13)
rotation = -1.57079
shape = SubResource("CircleShape2D_1pxna")

[node name="TireSmoke" parent="." instance=ExtResource("6_l3pon")]
position = Vector2(-10, -4)

[node name="TireSmoke2" parent="." instance=ExtResource("6_l3pon")]
position = Vector2(10, -4)

[connection signal="timeout" from="CoyoteTimer" to="." method="_on_coyote_timer_timeout"]
[connection signal="timeout" from="JumpBufferTimer" to="." method="_on_jump_buffer_timer_timeout"]
[connection signal="timeout" from="JumpHeightTimer" to="." method="_on_jump_height_timer_timeout"]
